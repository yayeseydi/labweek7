# Lab-Week-7
# Intro to Ansible Lab – Automating Nginx Deployment on AWS

The lab uses Terraform to create two EC2 instances and Ansible to configure Nginx automatically on both.  

---

##  1. Create a New SSH Key Pair

```
# Generate a new Ed25519 SSH key named "aws"
ssh-keygen -t ed25519 -f ~/.ssh/aws -C "ansible-lab-aws"
```
Creates a secure SSH key pair used for authentication between your local system and the EC2 instances.

~/.ssh/aws → private key

~/.ssh/aws.pub → public key (uploaded to AWS)

## 2. Import and Delete Keys in AWS
### Import the public key to AWS using the provided script

```
./scripts/import_lab_key ~/.ssh/aws.pub
```

Uploads your public key to AWS so Terraform can use it to connect to your EC2 instances.


## 3. Terraform Commands

Change into the Terraform directory:
```
cd terraform
```
Initialize Terraform
```
terraform init
```
Downloads providers and sets up the working directory.

Format Terraform Configuration
```
terraform fmt
```
Formats .tf files to keep configuration style consistent.

Validate Terraform Configuration
```
terraform validate
```
Validates that the Terraform files are correctly structured and syntactically valid.

Plan Terraform Deployment
```
terraform plan -out tfplan
```
Shows a preview of what resources Terraform will create.

Apply Terraform Deployment
```
terraform apply -auto-approve
```
Creates two EC2 instances on AWS and outputs their public IP addresses and DNS names.

## 4. Ansible Commands

Change into the Ansible directory using cd ../ansible

Check Playbook Syntax
```
ansible-playbook --syntax-check playbook.yml
```
Validates the syntax of the playbook before running it.

Run the Playbook
```
ansible-playbook playbook.yml
```

Runs the automation tasks to:

Install nginx

Create the /web/html directory

Copy the nginx.conf configuration file

Create a symbolic link in /etc/nginx/sites-enabled/default

Render index.html from the index.html.j2 template

Reload and enable the nginx service

5. Verify the Deployment

Open one of the following URLs in a browser:
http://35.162.126.199/
http://44.251.183.35/


You should see a rendered System Information page generated by Ansible.

 ## 6. Screenshot
Below is a screenshot of the rendered web page from one of the servers:
![Rendered Nginx Web Page](./web-page.png)


 ## 7. Cleanup

When finished, destroy your infrastructure and remove your SSH key from AWS.

```
cd ../terraform
terraform destroy -auto-approve
cd ..
./scripts/delete_lsb_key
```
Destroys the EC2 instances and deletes the SSH key pair from AWS.
